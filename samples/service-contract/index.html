<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Service contract available</title>
    <link href="https://unpkg.com/fundamental-styles@latest/dist/fundamental-styles.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
  </head>
  <body>
    <div>
      <h2 class="fd-title fd-title--h2" id="info">No selected activities</h2>
    </div>
    <script src="https://unpkg.com/fsm-shell"></script>
    <script src="helpers.js"></script>
    <script>
      // Import ShellSDK and events list from FSMShell global variable
      // see https://github.com/SAP/fsm-shell for more details.
      const { ShellSdk, SHELL_EVENTS } = FSMShell;

      // Display an error message if extension does not run within shell
      if (!ShellSdk.isInsideShell()) {
        updateUI('Unable to reach shell eventAPI');
      } else {
        // Initialise ShellSDK to connect with parent shell library
        const shellSdk = ShellSdk.init(parent, '*');

        // Initialise the extension by requesting the fsm context
        shellSdk.emit(SHELL_EVENTS.Version1.REQUIRE_CONTEXT, {
          clientIdentifier: 'service-contract',
          contextAttributes:['activity','serviceCall'],
           clientIdentifier: '000178da-fe30-413f-8f5b-2253a2656ac1',
          clientSecret: 'ea897154-d132-471e-9471-63b007e5a7d9',
          auth: {
            response_type: 'token'  // request a user token within the context
          }
        });

shellSdk.on(SHELL_EVENTS.Version1.REQUIRE_CONTEXT, handler);
shellSdk.on(SHELL_EVENTS.ERROR, errorhandler);

const handler = (context, origin) => {
   console.log('context:',context);

};

const errorhandler = (error) => {
   console.log('error:',error);

};

shellSdk.onViewState((viewState) =>{
console.log(viewState);

});
window.fsmShellMessageLogger.filterTable({
  type: ['V1.REQUIRE_CONTEXT', 'V1.GET_PERMISSIONS'],
  component: 'shell-host',
  direction: 'incoming',
});


      }
    </script>
  </body>
</html>